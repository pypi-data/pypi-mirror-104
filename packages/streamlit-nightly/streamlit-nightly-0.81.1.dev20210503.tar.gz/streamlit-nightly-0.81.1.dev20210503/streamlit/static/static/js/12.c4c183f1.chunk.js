/*! For license information please see 12.c4c183f1.chunk.js.LICENSE.txt */
(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[12],{3201:function(t,e){},3206:function(t,e){},3452:function(t,e){},3468:function(t,e){},3470:function(t,e){},3497:function(t,e){},4025:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return _}));var i=n(11),a=n(13),r=n(25),o=n(26),c=n(6),s=n(0),h=n(3849),u=n.n(h),l=n(3406),p=n.n(l),b=n(3407),j=n(2971),d=n(3840),f=n(3297),w=n(3292),m=n(3827),O=n(2972),v=n(337),g=n(27),x=n.n(g),k=n(36),S=n(127),y=n(47),V=n(3180),T=n(220),C=n.n(T),M=n(33),L=function(t){Object(r.a)(n,t);var e=Object(o.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return n}(Object(V.a)(Error)),E=function(t){Object(r.a)(n,t);var e=Object(o.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return n}(Object(V.a)(Error)),F=function(){function t(){Object(i.a)(this,t)}return Object(a.a)(t,null,[{key:"get",value:function(){var e=Object(k.a)(x.a.mark((function e(){var n,i,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=M.a.current,i=n.commandLine,a=n.userMapboxToken,t.token&&t.commandLine===i.toLowerCase()){e.next=10;break}if(""===a){e.next=6;break}t.token=a,e.next=9;break;case 6:return e.next=8,this.fetchToken("https://data.streamlit.io/tokens.json","mapbox");case 8:t.token=e.sent;case 9:t.commandLine=i.toLowerCase();case 10:return e.abrupt("return",t.token);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchToken",value:function(){var t=Object(k.a)(x.a.mark((function t(e,n){var i,a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.get(e);case 3:if(i=t.sent,null!=(a=i.data[n])&&""!==a){t.next=7;break}throw new Error('Missing token "'.concat(n,'"'));case 7:return t.abrupt("return",a);case 10:throw t.prev=10,t.t0=t.catch(0),new E("".concat(t.t0.message," (").concat(e,")"));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()}]),t}();F.token=void 0,F.commandLine=void 0,F.isRunningLocal=function(){var t=window.location.hostname;return"localhost"===t||"127.0.0.1"===t};var N=n(114),D=n.n(N),J=n(184),P=n(5),z=function(t){var e=t.error,n=t.width,i=t.deltaType;return e instanceof L?Object(P.jsx)(J.a,{width:n,name:"No Mapbox token provided",message:Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("p",{children:["To use ",Object(P.jsxs)("code",{children:["st.",i]})," or ",Object(P.jsx)("code",{children:"st.map"})," you need to set up a Mapbox access token."]}),Object(P.jsxs)("p",{children:["To get a token, create an account at"," ",Object(P.jsx)("a",{href:"https://mapbox.com",children:"https://mapbox.com"}),". It's free for moderate usage levels!"]}),Object(P.jsxs)("p",{children:["Once you have a token, just set it using the Streamlit config option ",Object(P.jsx)("code",{children:"mapbox.token"})," and don't forget to restart your Streamlit server at this point if it's still running, then reload this tab."]}),Object(P.jsxs)("p",{children:["See"," ",Object(P.jsx)("a",{href:"https://docs.streamlit.io/cli.html#view-all-config-options",children:"our documentation"})," ","for more info on how to set config options."]})]})}):e instanceof E?Object(P.jsx)(J.a,{width:n,name:"Error fetching Streamlit Mapbox token",message:Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("p",{children:"This app requires an internet connection."}),Object(P.jsx)("p",{children:"Please check your connection and try again."}),Object(P.jsxs)("p",{children:["If you think this is a bug, please file bug report"," ",Object(P.jsx)("a",{href:"https://github.com/streamlit/streamlit/issues/new/choose",children:"here"}),"."]})]})}):Object(P.jsx)(J.a,{width:n,name:"Error fetching Streamlit Mapbox token",message:e.message})},A=function(t){return function(e){var n=function(n){Object(r.a)(s,n);var a=Object(o.a)(s);function s(n){var r;return Object(i.a)(this,s),(r=a.call(this,n)).initMapboxToken=Object(k.a)(x.a.mark((function t(){var e;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.get();case 3:e=t.sent,r.setState({mapboxToken:e,isFetching:!1}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r.setState({mapboxTokenError:t.t0,isFetching:!1});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),r.render=function(){var n=r.state,i=n.mapboxToken,a=n.mapboxTokenError,o=n.isFetching,s=r.props.width;return a?Object(P.jsx)(z,{width:s,error:a,deltaType:t}):o?Object(P.jsx)(S.a,{body:"Loading...",kind:y.a.INFO,width:s}):Object(P.jsx)(e,Object(c.a)({mapboxToken:i},r.props))},r.state={isFetching:!0,mapboxToken:void 0,mapboxTokenError:void 0},r.initMapboxToken(),r}return s}(s.PureComponent);return n.displayName="withMapboxToken(".concat(e.displayName||e.name,")"),D()(n,e)}},I=n(8),q=n.n(I)()("div",{target:"e1q4dr930"})((function(t){var e=t.width;return{position:"relative",height:t.height,width:e}}),""),G=(n(3444),{classes:Object(c.a)(Object(c.a)(Object(c.a)({},j),w),f)});Object(O.registerLoaders)([m.CSVLoader]);var R=new d.JSONConverter({configuration:G}),W=function(t){Object(r.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={viewState:{bearing:0,pitch:0,zoom:11},initialized:!1,initialViewState:{}},t.componentDidMount=function(){t.setState({initialized:!0})},t.createTooltip=function(e){var n=t.props.element;if(!e||!e.object||null==n.tooltip)return!1;var i=JSON.parse(n.tooltip);return i.html?i.html=t.interpolate(e,i.html):i.text=t.interpolate(e,i.text),i},t.interpolate=function(t,e){var n=e.match(/{(.*?)}/g);return n&&n.forEach((function(n){var i=n.substring(1,n.length-1);t.object.hasOwnProperty(i)&&(e=e.replace(n,t.object[i]))})),e},t.onViewStateChange=function(e){var n=e.viewState;t.setState({viewState:n})},t}return Object(a.a)(n,[{key:"render",value:function(){var t=n.getDeckObject(this.props),e=this.state.viewState;return Object(P.jsx)(q,{className:"stDeckGlJsonChart",width:t.initialViewState.width,height:t.initialViewState.height,children:Object(P.jsx)(u.a,{viewState:e,onViewStateChange:this.onViewStateChange,height:t.initialViewState.height,width:t.initialViewState.width,layers:this.state.initialized?t.layers:[],getTooltip:this.createTooltip,controller:!0,children:Object(P.jsx)(b.StaticMap,{height:t.initialViewState.height,width:t.initialViewState.width,mapStyle:t.mapStyle&&("string"===typeof t.mapStyle?t.mapStyle:t.mapStyle[0]),mapboxApiAccessToken:this.props.mapboxToken})})})}}],[{key:"getDerivedStateFromProps",value:function(t,e){var i=n.getDeckObject(t);if(!p()(i.initialViewState,e.initialViewState)){var a=Object.keys(i.initialViewState).reduce((function(t,n){return i.initialViewState[n]===e.initialViewState[n]?t:Object(c.a)(Object(c.a)({},t),{},{[n]:i.initialViewState[n]})}),{});return{viewState:Object(c.a)(Object(c.a)({},e.viewState),a),initialViewState:i.initialViewState}}return null}}]),n}(s.PureComponent);W.getDeckObject=function(t){var e=t.element,n=t.width,i=t.height,a=JSON.parse(e.json);return i?(a.initialViewState.height=i,a.initialViewState.width=n):(a.initialViewState.height||(a.initialViewState.height=500),e.useContainerWidth&&(a.initialViewState.width=n)),delete a.views,R.convert(a)};var _=A("st.pydeck_chart")(Object(v.a)(W))}}]);
//# sourceMappingURL=12.c4c183f1.chunk.js.map