{"version":3,"sources":["api/client.js","features/editor/editorSlice.js","features/widget/Loading.js","features/widget/LoadError.js","features/editor/DAG.js","features/editor/Editor.js","features/directory/directorySlice.js","features/directory/DirectoryTreeItem.js","features/directory/Directory.js","features/editor/DAGDesc.js","App.js","app/store.js","index.js"],"names":["assemble_absolute_endpoint","relative_endpoint","url","URL","window","location","href","backend_port","process","REACT_APP_BACKEND_PORT","backend_origin","origin","replace","port","client","endpoint","a","body","customConfig","headers","config","method","JSON","stringify","fetch","response","json","data","ok","Error","statusText","Promise","reject","message","get","post","fetchContent","createAsyncThunk","payload","fetchDAG","editorSlice","createSlice","name","initialState","file","content","contentComposed","editable","editorStatus","editorError","dagContent","dagVerbose","dagStatus","dagError","reducers","setContentComposed","state","action","setEditable","setFile","extraReducers","pending","fulfilled","rejected","error","dag","verbose","selectEditor","editor","actions","Loading","props","Box","display","justifyContent","alignItems","minHeight","Fade","in","style","transitionDelay","unmountOnExit","CircularProgress","LoadError","color","fontSize","cytoscape","use","dagre","useStyles","makeStyles","theme","speedDial","position","bottom","spacing","right","DAG","classes","editorState","useSelector","React","useState","open","setOpen","cyRef","useRef","height","width","elements","stylesheet","selector","layout","rankDir","rankSep","zoom","minZoom","maxZoom","wheelSensitivity","ref","SpeedDial","ariaLabel","className","hidden","icon","SpeedDialIcon","onClose","onOpen","direction","FabProps","SpeedDialAction","title","onClick","current","cy","_cy","aDownloadLink","document","createElement","download","jpg","click","fit","Editor","dispatch","useDispatch","queryParam","URLSearchParams","useLocation","search","history","useHistory","useEffect","query","push","options","minimap","enabled","readOnly","wordWrap","automaticLayout","language","value","editorDidMount","monaco","onDidBlurEditorText","getOption","getValue","DirectoryAPI","fetchRootDirectory","directorySlice","status","openNonSQLWarning","setOpenNonSQLWarning","selectDirectory","directory","backgroundColor","marginLeft","labelRoot","padding","labelIcon","marginRight","labelText","fontWeight","flexGrow","DirectoryTreeItem","directoryState","childNodes","setChildNodes","expanded","setExpanded","is_root","children","map","node","id","is_dir","TreeView","defaultCollapseIcon","defaultExpandIcon","onNodeSelect","endsWith","onNodeToggle","event","nodes","expandingNodes","filter","x","includes","childId","then","result","TreeItem","nodeId","label","Typography","variant","Directory","Object","fromEntries","searchParams","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","DAGDesc","appBar","zIndex","drawer","menuButton","marginTop","float","hide","drawerPaper","drawerWidth","contentShift","transition","transitions","create","easing","easeOut","duration","enteringScreen","dragger","cursor","top","left","isResizing","App","selectedValue","setSelectedValue","setDrawerWidth","useMemo","handleMouseMove","e","clientX","innerWidth","handleMouseUp","removeEventListener","AppBar","Toolbar","IconButton","edge","aria-label","Tooltip","arrow","to","Drawer","paper","onMouseDown","stopPropagation","preventDefault","addEventListener","clsx","Paper","elevation","Grid","container","justify","FormControl","component","RadioGroup","row","defaultValue","onChange","target","FormControlLabel","control","Radio","configureStore","reducer","directoryReducer","editorReducer","ReactDOM","render","StrictMode","store","getElementById"],"mappings":"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","file":"static/js/main.a36a99e0.chunk.js","sourcesContent":["// A tiny wrapper around fetch(), borrowed from\n// https://kentcdodds.com/blog/replace-axios-with-a-simple-custom-fetch-wrapper\n\nexport function assemble_absolute_endpoint(relative_endpoint) {\n  let url = new URL(window.location.href);\n  let backend_port = process.env.REACT_APP_BACKEND_PORT;\n  let backend_origin = backend_port ? url.origin.replace(url.port, backend_port) : url.origin;\n  return `${backend_origin}${relative_endpoint}`\n}\n\nexport async function client(endpoint, {body, ...customConfig} = {}) {\n  const headers = {'Content-Type': 'application/json'}\n\n  const config = {\n    method: body ? 'POST' : 'GET',\n    ...customConfig,\n    headers: {\n      ...headers,\n      ...customConfig.headers,\n    },\n  }\n\n  if (body) {\n    config.body = JSON.stringify(body)\n  }\n\n  let data\n  try {\n    const response = await window.fetch(endpoint, config)\n    data = await response.json()\n    if (response.ok) {\n      return data\n    }\n    throw new Error(response.statusText)\n  } catch (err) {\n    return Promise.reject(err.message ? err.message : data)\n  }\n}\n\nclient.get = function (endpoint, customConfig = {}) {\n  return client(endpoint, {...customConfig, method: 'GET'})\n}\n\nclient.post = function (endpoint, body, customConfig = {}) {\n  return client(endpoint, {...customConfig, body})\n}\n","import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\nimport {assemble_absolute_endpoint, client} from \"../../api/client\";\n\nconst initialState = {\n  file: \"\",\n  content: \"\",\n  contentComposed: \"\",\n  editable: false,\n  editorStatus: 'idle',\n  editorError: null,\n  dagContent: [],\n  dagVerbose: \"\",\n  dagStatus: 'idle',\n  dagError: null\n}\n\nexport const fetchContent = createAsyncThunk('editor/fetchContent', async (payload) => {\n  return await client.post(assemble_absolute_endpoint(\"/script\"), payload);\n})\n\nexport const fetchDAG = createAsyncThunk('dag/fetchDAG', async (payload) => {\n  return await client.post(assemble_absolute_endpoint(\"/lineage\"), payload);\n})\n\nexport const editorSlice = createSlice({\n  name: 'editor',\n  initialState,\n  reducers: {\n    setContentComposed(state, action) {\n      state.contentComposed = action.payload\n    },\n    setEditable(state, action) {\n      state.editable = action.payload\n    },\n    setFile(state, action) {\n      state.file = action.payload\n    }\n  },\n  extraReducers: {\n    [fetchContent.pending]: (state) => {\n      state.editorStatus = \"loading\"\n    },\n    [fetchContent.fulfilled]: (state, action) => {\n      state.editorStatus = \"succeeded\";\n      state.content = action.payload.content\n    },\n    [fetchContent.rejected]: (state, action) => {\n      state.editorStatus = \"failed\"\n      state.editorError = action.error.message\n    },\n    [fetchDAG.pending]: (state) => {\n      state.dagStatus = \"loading\"\n    },\n    [fetchDAG.fulfilled]: (state, action) => {\n      state.dagStatus = \"succeeded\";\n      state.dagContent = action.payload.dag;\n      state.dagVerbose = action.payload.verbose;\n    },\n    [fetchDAG.rejected]: (state, action) => {\n      state.dagStatus = \"failed\";\n      state.dagError = action.error.message;\n    }\n  }\n});\n\nexport const selectEditor = state => state.editor;\nexport const {setContentComposed, setEditable, setFile} = editorSlice.actions;\n\nexport default editorSlice.reducer;\n","import React from 'react';\nimport Fade from '@material-ui/core/Fade';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {Box} from \"@material-ui/core\";\n\n\nexport function Loading(props) {\n  return (\n    <Box\n      display=\"flex\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      minHeight={props.minHeight}\n    >\n      <Fade\n        in\n        style={{\n          transitionDelay: '500ms',\n        }}\n        unmountOnExit\n      >\n        <CircularProgress/>\n      </Fade>\n    </Box>\n  );\n}\n","import React from 'react';\nimport {Box} from \"@material-ui/core\";\nimport ErrorOutlinedIcon from \"@material-ui/icons/Error\";\n\n\nexport function LoadError(props) {\n  return (\n    <Box\n      display=\"flex\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      minHeight={props.minHeight}\n    >\n    <span>\n      <ErrorOutlinedIcon color=\"primary\" fontSize=\"large\"/>\n      <p>{props.message}</p>\n    </span>\n    </Box>\n  );\n}\n","import React, {useRef} from 'react';\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport dagre from 'cytoscape-dagre';\nimport cytoscape from 'cytoscape';\nimport {useSelector} from \"react-redux\";\nimport {selectEditor} from \"./editorSlice\";\nimport {Loading} from \"../widget/Loading\";\nimport {LoadError} from \"../widget/LoadError\";\nimport {SpeedDial, SpeedDialIcon} from \"@material-ui/lab\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport SaveAltIcon from '@material-ui/icons/SaveAlt';\nimport ZoomInIcon from '@material-ui/icons/ZoomIn';\nimport SettingsBackupRestoreIcon from '@material-ui/icons/SettingsBackupRestore';\nimport ZoomOutIcon from '@material-ui/icons/ZoomOut';\n\ncytoscape.use(dagre);\n\nconst useStyles = makeStyles((theme) => ({\n  speedDial: {\n    position: 'absolute',\n    '&.MuiSpeedDial-directionLeft': {\n      bottom: theme.spacing(5),\n      right: theme.spacing(2),\n    }\n  },\n}))\n\n\nexport function DAG(props) {\n  const classes = useStyles();\n  const editorState = useSelector(selectEditor);\n  const [open, setOpen] = React.useState(false);\n  const cyRef = useRef(null);\n\n  const handleSave = () => {\n    if (cyRef.current) {\n      let cy = cyRef.current._cy;\n      let aDownloadLink = document.createElement('a');\n      aDownloadLink.download = `${editorState.file}.jpg`;\n      aDownloadLink.href = cy.jpg({'full': true, 'quality': 1});\n      aDownloadLink.click();\n      setOpen(false);\n    }\n  }\n\n  if (editorState.dagStatus === \"loading\") {\n    return <Loading minHeight={props.height}/>\n  } else if (editorState.dagStatus === \"failed\") {\n    return <LoadError minHeight={props.height} message={editorState.dagError}/>\n  } else {\n    const stylesheet = [\n      {\n        selector: 'node',\n        style: {\n          height: 10,\n          width: 10,\n          content: 'data(id)',\n          'text-valign': 'top',\n          'text-halign': 'right',\n          'font-size': 10,\n          'color': '#35393e',\n          'background-color': '#3499d9',\n          'border-color': '#000',\n          'border-width': 1,\n          'border-opacity': 0.8\n        }\n      },\n      {\n        selector: 'edge',\n        style: {\n          width: 1,\n          'line-color': '#9ab5c7',\n          'target-arrow-color': '#9ab5c7',\n          'target-arrow-shape': 'triangle',\n          'arrow-scale': 0.8,\n          'curve-style': 'bezier'\n        }\n      }\n    ]\n    const layout = {\n      name: 'dagre',\n      rankDir: 'LR',\n      rankSep: 200,\n    };\n    const style = {width: props.width, height: props.height};\n    return (\n      <div>\n        <CytoscapeComponent\n          elements={editorState.dagContent}\n          stylesheet={stylesheet}\n          style={style}\n          layout={layout}\n          zoom={1}\n          minZoom={0.5}\n          maxZoom={2}\n          wheelSensitivity={0.2}\n          ref={cyRef}\n        />\n        <SpeedDial\n          ariaLabel=\"SpeedDial example\"\n          className={classes.speedDial}\n          hidden={false}\n          icon={<SpeedDialIcon/>}\n          onClose={() => setOpen(false)}\n          onOpen={() => setOpen(true)}\n          open={open}\n          direction=\"left\"\n          FabProps={{\"size\": \"small\"}}\n        >\n          <SpeedDialAction\n            title=\"Save\"\n            icon={<SaveAltIcon/>}\n            onClick={handleSave}\n          />\n          <SpeedDialAction\n            title=\"Zoom In\"\n            icon={<ZoomInIcon/>}\n            onClick={() => {\n              cyRef.current._cy.zoom(cyRef.current._cy.zoom() + 0.1)\n            }}\n          />\n          <SpeedDialAction\n            title=\"Auto Fit\"\n            icon={<SettingsBackupRestoreIcon/>}\n            onClick={() => {\n              cyRef.current._cy.fit()\n            }}\n          />\n          <SpeedDialAction\n            title=\"Zoom Out\"\n            icon={<ZoomOutIcon/>}\n            onClick={() => {\n              cyRef.current._cy.zoom(cyRef.current._cy.zoom() - 0.1)\n            }}\n          />\n        </SpeedDial>\n      </div>\n    );\n  }\n}\n","import React, {useEffect} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {fetchContent, fetchDAG, selectEditor, setContentComposed, setEditable, setFile} from \"./editorSlice\";\nimport MonacoEditor from \"react-monaco-editor\";\nimport {Loading} from \"../widget/Loading\";\nimport {LoadError} from \"../widget/LoadError\";\nimport {useHistory, useLocation} from \"react-router-dom\";\n\nconst useQueryParam = () => {\n  return new URLSearchParams(useLocation().search)\n};\n\nexport function Editor(props) {\n  const dispatch = useDispatch();\n  const editorState = useSelector(selectEditor);\n  const queryParam = useQueryParam();\n  const history = useHistory();\n\n  useEffect(() => {\n    let query = queryParam.get(\"e\");\n    if (query !== null) {\n      dispatch(setContentComposed(query));\n      history.push(\"/\");\n    } else {\n      let file = queryParam.get(\"f\");\n      if (editorState.file !== file) {\n        dispatch(setFile(file));\n        if (file === null) {\n          dispatch(setEditable(true));\n          dispatch(fetchDAG({\"e\": editorState.contentComposed}))\n        } else {\n          dispatch(setEditable(false));\n          dispatch(fetchContent({\"f\": file}));\n          dispatch(fetchDAG({\"f\": file}));\n        }\n      }\n    }\n\n\n  })\n\n  const handleEditorDidMount = (editor, monaco) => {\n    editor.onDidBlurEditorText(() => {\n      const readOnly = 75;\n      if (!editor.getOption(readOnly)) {\n        dispatch(setContentComposed(editor.getValue()));\n        dispatch(fetchDAG({\"e\": editor.getValue()}));\n      }\n    })\n  }\n\n  if (editorState.editorStatus === \"loading\") {\n    return <Loading minHeight={props.height}/>\n  } else if (editorState.editorStatus === \"failed\") {\n    return <LoadError minHeight={props.height} message={editorState.editorError}/>\n  } else {\n    const options = {\n      minimap: {enabled: false},\n      readOnly: !editorState.editable,\n      wordWrap: \"on\",\n      automaticLayout: true\n    }\n    return <MonacoEditor\n      width={props.width}\n      height={props.height}\n      language=\"sql\"\n      value={editorState.editable ? editorState.contentComposed : editorState.content}\n      options={options}\n      editorDidMount={handleEditorDidMount}\n    />\n  }\n}\n","import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\nimport {assemble_absolute_endpoint, client} from \"../../api/client\";\n\nconst initialState = {\n  content: {},\n  status: 'idle',\n  error: null,\n  openNonSQLWarning: false\n};\n\nexport const DirectoryAPI = async (payload) => {\n  return await client.post(assemble_absolute_endpoint(\"/directory\"), payload);\n}\n\nexport const fetchRootDirectory = createAsyncThunk('directory/fetchDirectory', DirectoryAPI);\n\nexport const directorySlice = createSlice({\n  name: 'directory',\n  initialState,\n  reducers: {\n    setOpenNonSQLWarning(state, action) {\n      state.openNonSQLWarning = action.payload\n    }\n  },\n  extraReducers: {\n    [fetchRootDirectory.pending]: (state) => {\n      state.status = \"loading\"\n    },\n    [fetchRootDirectory.fulfilled]: (state, action) => {\n      state.status = \"succeeded\";\n      state.content = action.payload\n    },\n    [fetchRootDirectory.rejected]: (state, action) => {\n      state.status = \"failed\"\n      state.error = action.error.message\n    }\n  }\n});\n\nexport const selectDirectory = state => state.directory;\nexport const {setOpenNonSQLWarning} = directorySlice.actions;\n\nexport default directorySlice.reducer;\n","import React, {useEffect} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport FolderIcon from \"@material-ui/icons/Folder\";\nimport DescriptionIcon from \"@material-ui/icons/Description\";\nimport {makeStyles} from \"@material-ui/core\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {DirectoryAPI, selectDirectory, setOpenNonSQLWarning} from \"./directorySlice\";\nimport {useHistory} from \"react-router-dom\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  \"@global\": {\n    \".MuiTreeItem-root.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label\": {\n      backgroundColor: \"white\"\n    },\n  },\n  directory: {\n    marginLeft: theme.spacing(0.2)\n  },\n  labelRoot: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0.1, 0),\n  },\n  labelIcon: {\n    marginRight: theme.spacing(0.2),\n  },\n  labelText: {\n    fontWeight: 'inherit',\n    flexGrow: 1,\n  },\n}));\n\n\nexport default function DirectoryTreeItem(props) {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const directoryState = useSelector(selectDirectory);\n  const [childNodes, setChildNodes] = React.useState(null);\n  const [expanded, setExpanded] = React.useState([]);\n\n  useEffect(() => {\n    if (props.is_root) {\n      setChildNodes((directoryState.content.children ?? []).map(\n        node => <DirectoryTreeItem id={node.id} name={node.name} is_dir={node.is_dir} is_root={false}/>)\n      )\n      setExpanded([props.id])\n    }\n  }, [directoryState.content.children, props.id, props.is_root])\n\n  const handleSelect = () => {\n    if (!props.is_dir) {\n      if (props.name.endsWith(\".sql\")) {\n        history.push(`/?f=${props.id}`);\n      } else {\n        dispatch(setOpenNonSQLWarning(true))\n      }\n    }\n  };\n\n  const handleToggle = (event, nodes) => {\n    const expandingNodes = nodes.filter(x => !expanded.includes(x));\n    setExpanded(nodes);\n    if (expandingNodes[0]) {\n      const childId = expandingNodes[0];\n      DirectoryAPI({\"d\": childId}).then(result =>\n        setChildNodes(\n          result.children.map(node => <DirectoryTreeItem id={node.id} name={node.name} is_dir={node.is_dir}\n                                                         is_root={false}/>)\n        )\n      );\n    }\n  };\n\n  return (\n    <TreeView\n      className={classes.directory}\n      defaultCollapseIcon={<ExpandMoreIcon/>}\n      defaultExpandIcon={<ChevronRightIcon/>}\n      expanded={expanded}\n      onNodeSelect={handleSelect}\n      onNodeToggle={handleToggle}\n    >\n      <TreeItem\n        key={props.id}\n        nodeId={props.id}\n        label={\n          <div className={classes.labelRoot}>\n            {props.is_dir ? <FolderIcon color=\"action\" className={classes.labelIcon}/> :\n              <DescriptionIcon color=\"action\" className={classes.labelIcon}/>}\n            <Typography variant=\"body2\" className={classes.labelText}>\n              {props.name}\n            </Typography>\n          </div>\n        }\n      >\n        {props.is_dir && (childNodes || [<div key=\"stub\"/>])}\n      </TreeItem>\n    </TreeView>\n  );\n}\n","import React, {useEffect} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {fetchRootDirectory, selectDirectory, setOpenNonSQLWarning} from \"./directorySlice\";\nimport {Loading} from \"../widget/Loading\";\nimport {LoadError} from \"../widget/LoadError\";\nimport {Snackbar} from \"@material-ui/core\";\nimport DirectoryTreeItem from \"./DirectoryTreeItem\";\n\n\nexport function Directory(props) {\n  const dispatch = useDispatch();\n  const directoryState = useSelector(selectDirectory);\n\n  useEffect(() => {\n    if (directoryState.status === \"idle\") {\n      let url = new URL(window.location.href);\n      dispatch(fetchRootDirectory(Object.fromEntries(url.searchParams)))\n    }\n  })\n\n  if (directoryState.status === \"loading\") {\n    return <Loading minHeight={props.height}/>\n  } else if (directoryState.status === \"failed\") {\n    return <LoadError minHeight={props.height} message={directoryState.error}/>\n  } else {\n    return <div>\n      <DirectoryTreeItem id={directoryState.content.id} name={directoryState.content.name} is_dir={true}\n                         is_root={true}/>\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        open={directoryState.openNonSQLWarning}\n        autoHideDuration={1000}\n        onClose={() => {\n          dispatch(setOpenNonSQLWarning(false))\n        }}\n        message=\"Non SQL File Is Not Supported\"\n      />\n    </div>\n  }\n}\n","import {Loading} from \"../widget/Loading\";\nimport {LoadError} from \"../widget/LoadError\";\nimport React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport MonacoEditor from \"react-monaco-editor\";\nimport {selectEditor} from \"./editorSlice\";\n\nexport function DAGDesc(props) {\n  const editorState = useSelector(selectEditor);\n\n  if (editorState.dagStatus === \"loading\") {\n    return <Loading minHeight={props.height}/>\n  } else if (editorState.dagStatus === \"failed\") {\n    return <LoadError minHeight={props.height} message={editorState.dagError}/>\n  } else {\n    const options = {\n      minimap: {enabled: false},\n      readOnly: true,\n      wordWrap: \"on\",\n      automaticLayout: true\n    }\n    return <MonacoEditor\n      width={props.width}\n      height={props.height}\n      value={editorState.dagVerbose}\n      options={options}\n    />\n  }\n}\n","import React, {useMemo} from 'react';\nimport {Box, Drawer, FormControl, FormControlLabel, Grid, Paper, Radio, RadioGroup, Tooltip} from \"@material-ui/core\";\nimport {DAG} from \"./features/editor/DAG\";\nimport {Editor} from \"./features/editor/Editor\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport CreateIcon from \"@material-ui/icons/Create\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport clsx from \"clsx\";\nimport {Directory} from \"./features/directory/Directory\";\nimport {BrowserRouter as Router, Link} from \"react-router-dom\";\nimport {DAGDesc} from \"./features/editor/DAGDesc\";\nimport {useSelector} from \"react-redux\";\nimport {selectEditor} from \"./features/editor/editorSlice\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    flexGrow: 1,\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  content: {\n    padding: theme.spacing(0.5),\n    marginTop: theme.spacing(6),\n    float: \"right\"\n  },\n  hide: {\n    display: \"none\"\n  },\n  drawerPaper: {\n    width: ({drawerWidth}) => drawerWidth + \"vw\",\n  },\n  contentShift: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  dragger: {\n    width: '5px',\n    cursor: 'ew-resize',\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: ({drawerWidth}) => drawerWidth + \"vw\",\n    backgroundColor: \"#d7d7d7\"\n  }\n}));\n\n\nlet isResizing = null;\n\n\nexport default function App() {\n  const editorState = useSelector(selectEditor);\n  const [selectedValue, setSelectedValue] = React.useState('dag');\n  const [open, setOpen] = React.useState(true);\n  const [drawerWidth, setDrawerWidth] = React.useState(18);\n  const classes = useStyles({drawerWidth: drawerWidth});\n\n  const height = \"90vh\";\n  const width = useMemo(() => {\n    let full_width = 99.5;\n    return (open ? full_width - drawerWidth : full_width) + \"vw\"\n  }, [open, drawerWidth])\n\n  const handleMouseDown = e => {\n    e.stopPropagation();\n    e.preventDefault();\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp)\n    isResizing = true;\n  };\n\n  const handleMouseMove = e => {\n    if (!isResizing) {\n      return;\n    }\n    let width = e.clientX * 100 / window.innerWidth;\n    let minWidth = 10, maxWidth = 50;\n    if (width > minWidth && width < maxWidth) {\n      setDrawerWidth(width);\n    }\n  }\n\n  const handleMouseUp = () => {\n    if (!isResizing) {\n      return;\n    }\n    isResizing = false;\n    document.removeEventListener(\"mousemove\", handleMouseMove);\n    document.removeEventListener(\"mouseup\", handleMouseUp);\n  }\n\n  return (\n    <Router>\n      <div>\n        <Box>\n          <AppBar position=\"fixed\" className={classes.appBar}>\n            <Toolbar variant=\"dense\">\n              <IconButton\n                edge=\"start\"\n                className={classes.menuButton}\n                color=\"inherit\"\n                aria-label=\"menu\"\n                onClick={() => {\n                  setOpen(!open)\n                }}\n              >\n                {open ? <ChevronLeftIcon/> : <MenuIcon/>}\n              </IconButton>\n              <Typography variant=\"h6\" className={classes.title}>\n                SQLLineage\n              </Typography>\n              {editorState.editable ?\n                <Tooltip title=\"Visualize Lineage By Filling In Your Own SQL\" arrow>\n                  <div>Composing Mode</div>\n                </Tooltip> :\n                <Link to=\"/\" style={{color: \"white\"}}>\n                  <Tooltip title=\"Enter Composing Mode to Visualize Your Own SQL\" arrow>\n                    <IconButton\n                      color=\"inherit\"\n                      onClick={() => {\n                        setSelectedValue(\"script\");\n                        setOpen(false);\n                      }}\n                    >\n                      <CreateIcon/>\n                    </IconButton>\n                  </Tooltip>\n                </Link>\n              }\n            </Toolbar>\n          </AppBar>\n          <Drawer\n            variant=\"persistent\"\n            open={open}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n          >\n            <Box className={classes.content}>\n              <Directory/>\n            </Box>\n          </Drawer>\n        </Box>\n        <div\n          id=\"dragger\"\n          onMouseDown={handleMouseDown}\n          className={classes.dragger}\n        />\n        <main\n          className={clsx(classes.content, {\n            [classes.contentShift]: open,\n          })}\n        >\n          <Paper elevation=\"24\" style={{height: height, width: width}}>\n            <Box className={selectedValue === \"dag\" ? \"\" : classes.hide}>\n              <DAG height={height} width={width}/>\n            </Box>\n            <Box className={selectedValue === \"text\" ? \"\" : classes.hide}>\n              <DAGDesc height={height} width={width}/>\n            </Box>\n            <Box className={selectedValue === \"script\" ? \"\" : classes.hide}>\n              <Editor height={height} width={width}/>\n            </Box>\n          </Paper>\n          <Grid container justify=\"center\">\n            <FormControl component=\"fieldset\">\n              <RadioGroup row aria-label=\"position\" name=\"position\" defaultValue=\"dag\"\n                          value={selectedValue}\n                          onChange={(event) => setSelectedValue(event.target.value)}>\n                <FormControlLabel\n                  value=\"dag\"\n                  control={<Radio color=\"primary\"/>}\n                  label=\"Lineage View\"\n                />\n                <FormControlLabel\n                  value=\"text\"\n                  control={<Radio color=\"primary\"/>}\n                  label=\"Text View\"\n                />\n                <FormControlLabel\n                  value=\"script\"\n                  control={<Radio color=\"primary\"/>}\n                  label=\"Script View\"\n                />\n              </RadioGroup>\n            </FormControl>\n          </Grid>\n        </main>\n      </div>\n    </Router>\n  )\n}\n","import {configureStore} from '@reduxjs/toolkit';\nimport directoryReducer from '../features/directory/directorySlice';\nimport editorReducer from '../features/editor/editorSlice';\n\nexport default configureStore({\n  reducer: {\n    directory: directoryReducer,\n    editor: editorReducer,\n  },\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport store from \"./app/store\";\nimport {Provider} from \"react-redux\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App/>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}